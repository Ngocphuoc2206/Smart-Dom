{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///D:/Smart-Dom/src/contexts/AuthContext.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { createContext, useContext, useState, useEffect } from \"react\";\r\n\r\ninterface User {\r\n  email: string;\r\n  name: string;\r\n  dob?: string;\r\n  userType: \"owner\" | \"tenant\";\r\n  isAuthenticated: boolean;\r\n  avatar?: string;\r\n  phone?: string;\r\n  joinDate?: string;\r\n  idNumber?: string;\r\n  address?: string;\r\n}\r\n\r\ninterface AuthContextType {\r\n  user: User | null;\r\n  login: (userData: User) => void;\r\n  logout: () => void;\r\n  isLoading: boolean;\r\n}\r\n\r\nconst AuthContext = createContext<AuthContextType | undefined>(undefined);\r\n\r\nexport function AuthProvider({ children }: { children: React.ReactNode }) {\r\n  const [user, setUser] = useState<User | null>(null);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in on app start\r\n    const checkAuth = () => {\r\n      try {\r\n        const userData = localStorage.getItem(\"user\");\r\n        if (userData) {\r\n          const parsedUser = JSON.parse(userData);\r\n          if (parsedUser.isAuthenticated) {\r\n            setUser(parsedUser);\r\n          }\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error checking auth:\", error);\r\n        localStorage.removeItem(\"user\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    checkAuth();\r\n  }, []);\r\n\r\n  const login = (userData: User) => {\r\n    setUser(userData);\r\n    localStorage.setItem(\"user\", JSON.stringify(userData));\r\n  };\r\n\r\n  const logout = () => {\r\n    setUser(null);\r\n    // Clear all authentication data\r\n    localStorage.removeItem(\"user\");\r\n    localStorage.removeItem(\"authToken\");\r\n    localStorage.removeItem(\"refreshToken\");\r\n\r\n    // Clear any session storage\r\n    sessionStorage.clear();\r\n\r\n    // Clear any cookies (if using cookies for auth)\r\n    document.cookie.split(\";\").forEach((c) => {\r\n      const eqPos = c.indexOf(\"=\");\r\n      const name = eqPos > -1 ? c.substr(0, eqPos) : c;\r\n      document.cookie = name + \"=;expires=Thu, 01 Jan 1970 00:00:00 GMT;path=/\";\r\n    });\r\n\r\n    // Force reload to clear any cached state\r\n    window.location.href = \"/\";\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, login, logout, isLoading }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n}\r\n\r\nexport function useAuth() {\r\n  const context = useContext(AuthContext);\r\n  if (context === undefined) {\r\n    throw new Error(\"useAuth must be used within an AuthProvider\");\r\n  }\r\n  return context;\r\n}\r\n\r\n// Protected Route Component\r\nexport function ProtectedRoute({\r\n  children,\r\n  allowedUserTypes,\r\n}: {\r\n  children: React.ReactNode;\r\n  allowedUserTypes?: (\"owner\" | \"tenant\")[];\r\n}) {\r\n  const { user, isLoading } = useAuth();\r\n\r\n  if (isLoading) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (!user || !user.isAuthenticated) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center\">\r\n          <div className=\"text-6xl mb-4\">üîí</div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\r\n            Y√™u c·∫ßu ƒëƒÉng nh·∫≠p\r\n          </h2>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            B·∫°n c·∫ßn ƒëƒÉng nh·∫≠p ƒë·ªÉ truy c·∫≠p trang n√†y\r\n          </p>\r\n          <div className=\"space-y-3\">\r\n            <a\r\n              href=\"/auth/login\"\r\n              className=\"block w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors\"\r\n            >\r\n              ƒêƒÉng nh·∫≠p\r\n            </a>\r\n            <a\r\n              href=\"/auth/register\"\r\n              className=\"block w-full border border-gray-300 text-gray-700 py-3 rounded-lg hover:bg-gray-50 transition-colors\"\r\n            >\r\n              ƒêƒÉng k√Ω\r\n            </a>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (allowedUserTypes && !allowedUserTypes.includes(user.userType)) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <div className=\"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center\">\r\n          <div className=\"text-6xl mb-4\">‚õî</div>\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">\r\n            Kh√¥ng c√≥ quy·ªÅn truy c·∫≠p\r\n          </h2>\r\n          <p className=\"text-gray-600 mb-6\">\r\n            B·∫°n kh√¥ng c√≥ quy·ªÅn truy c·∫≠p v√†o trang n√†y\r\n          </p>\r\n          <a\r\n            href={\r\n              user.userType === \"owner\"\r\n                ? \"/owner-dashboard\"\r\n                : \"/tenant-dashboard\"\r\n            }\r\n            className=\"block w-full bg-blue-600 text-white py-3 rounded-lg hover:bg-blue-700 transition-colors\"\r\n          >\r\n            V·ªÅ Dashboard\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return <>{children}</>;\r\n}\r\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 238, "column": 0}, "map": {"version":3,"sources":["file:///D:/Smart-Dom/node_modules/next/src/server/route-modules/app-page/module.compiled.js"],"sourcesContent":["if (process.env.NEXT_RUNTIME === 'edge') {\n  module.exports = require('next/dist/server/route-modules/app-page/module.js')\n} else {\n  if (process.env.__NEXT_EXPERIMENTAL_REACT) {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo-experimental.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page-experimental.runtime.prod.js')\n      }\n    }\n  } else {\n    if (process.env.NODE_ENV === 'development') {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.dev.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.dev.js')\n      }\n    } else {\n      if (process.env.TURBOPACK) {\n        module.exports = require('next/dist/compiled/next-server/app-page-turbo.runtime.prod.js')\n      } else {\n        module.exports = require('next/dist/compiled/next-server/app-page.runtime.prod.js')\n      }\n    }\n  }\n}\n"],"names":["process","env","NEXT_RUNTIME","module","exports","require","__NEXT_EXPERIMENTAL_REACT","NODE_ENV","TURBOPACK"],"mappings":";AAAA,IAAIA,QAAQC,GAAG,CAACC,YAAY,KAAK,MAAQ;;AAEzC,OAAO;IACL,IAAIF,QAAQC,GAAG,CAACK,uBAA2B,EAAF;;IAczC,OAAO;QACL,IAAIN,QAAQC,GAAG,CAACM,QAAQ,KAAK,WAAe;YAC1C,IAAIP,QAAQC,GAAG,CAACO,SAAS,eAAE;gBACzBL,OAAOC,OAAO,GAAGC,QAAQ;YAC3B,OAAO;;YAEP;QACF,OAAO;;QAMP;IACF;AACF","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 261, "column": 0}, "map": {"version":3,"sources":["file:///D:/Smart-Dom/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react-jsx-dev-runtime.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored[\n  'react-ssr'\n].ReactJsxDevRuntime\n"],"names":["module","exports","require","vendored","ReactJsxDevRuntime"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CACxD,YACD,CAACC,kBAAkB","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 268, "column": 0}, "map": {"version":3,"sources":["file:///D:/Smart-Dom/node_modules/next/src/server/route-modules/app-page/vendored/ssr/react.ts"],"sourcesContent":["module.exports = require('../../module.compiled').vendored['react-ssr'].React\n"],"names":["module","exports","require","vendored","React"],"mappings":";AAAAA,OAAOC,OAAO,GAAGC,QAAQ,4HAAyBC,QAAQ,CAAC,YAAY,CAACC,KAAK","ignoreList":[0],"debugId":null}}]
}